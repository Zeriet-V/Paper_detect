# å›¾ç‰‡å†…å®¹æ™ºèƒ½æ£€æµ‹åŠŸèƒ½è¯´æ˜

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

ä½¿ç”¨**ç¡…åŸºæµåŠ¨ Qwen3-VL-32B-Instruct** è§†è§‰æ¨¡å‹ï¼Œæ™ºèƒ½æ£€æµ‹å­¦æœ¯è®ºæ–‡ä¸­å›¾è¡¨çš„å†…å®¹è§„èŒƒæ€§ã€‚

## ğŸ¯ æ£€æµ‹è§„åˆ™

### 1. åˆ»åº¦çº¿æ–¹å‘
- âœ… åˆ»åº¦çº¿åº”æŒ‡å‘å›¾å†…éƒ¨
- âŒ åˆ»åº¦çº¿æŒ‡å‘å›¾å¤–éƒ¨

### 2. ç‰©ç†é‡å’Œå•ä½è¡¨ç¤º
- **æ ¼å¼**: `ç‰©ç†é‡/å•ä½` ï¼ˆç”¨`/`åˆ†éš”ï¼‰
- **ç‰©ç†é‡ç¬¦å·**: å¿…é¡»ä¸º**æ–œä½“**ï¼ˆå¦‚ *E*, *H*ï¼‰
- **å•ä½ç¬¦å·**: å¿…é¡»ä¸º**æ­£ä½“**ï¼ˆå¦‚ m, kgï¼‰
- ç¤ºä¾‹ï¼š
  - âœ… *E*/(V/m) - ç‰©ç†é‡Eæ–œä½“ï¼Œå•ä½æ­£ä½“
  - âŒ E/(V/m) - ç‰©ç†é‡Eæ²¡æœ‰æ–œä½“
  - âŒ *E*/*V/m* - å•ä½Vå’Œmä¸åº”è¯¥æ–œä½“

### 3. ç»„åˆå•ä½æ‹¬å·è§„åˆ™
- **ç»„åˆå•ä½**: å¿…é¡»åŠ æ‹¬å·
  - âœ… (H/m), (kg/mÂ³), (J/(molÂ·K))
  - âŒ H/m, kg/mÂ³
- **ç‰¹æ®Šæƒ…å†µ**:
  - âœ… â„ƒ - æ‘„æ°åº¦ä¸åŠ æ‹¬å·
  - âœ… (Â°) - è§’åº¦å•ä½å¿…é¡»åŠ æ‹¬å·

### 4. æ•°å€¼æ ¼å¼ç»Ÿä¸€æ€§
- å°æ•°ä¿ç•™ä½æ•°å¿…é¡»ç»Ÿä¸€
- **è§„åˆ™**: å¦‚æœçºµè½´ä½¿ç”¨ä¸€ä½å°æ•°ï¼ˆ0.1, 0.2ï¼‰ï¼Œæ¨ªè½´ä¹Ÿå¿…é¡»ä½¿ç”¨ä¸€ä½å°æ•°
  - âœ… çºµè½´: 0.1, 0.2, 0.3 â†’ æ¨ªè½´: 1.0, 2.0, 3.0
  - âŒ çºµè½´: 0.1, 0.2, 0.3 â†’ æ¨ªè½´: 1, 2, 3

### 5. åæ ‡è½´æ ‡é¢˜ä¸€è‡´æ€§
- çºµåæ ‡å’Œæ¨ªåæ ‡çš„æ ‡é¢˜è¡¨ç¤ºæ–¹å¼å¿…é¡»ç»Ÿä¸€
- **ç»Ÿä¸€ä½¿ç”¨æ–‡å­—** æˆ– **ç»Ÿä¸€ä½¿ç”¨ç¬¦å·**ï¼Œä¸èƒ½æ··ç”¨
  - âœ… çºµåæ ‡: Temperature, æ¨ªåæ ‡: Timeï¼ˆéƒ½ç”¨æ–‡å­—ï¼‰
  - âœ… çºµåæ ‡: *T*, æ¨ªåæ ‡: *t*ï¼ˆéƒ½ç”¨ç¬¦å·ï¼‰
  - âŒ çºµåæ ‡: Temperature, æ¨ªåæ ‡: *t*ï¼ˆæ··ç”¨ï¼‰

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1: å•ç‹¬æµ‹è¯•å›¾ç‰‡å†…å®¹æ£€æµ‹

```bash
python test_figure_content.py template/test.docx 20 your_api_key
```

å‚æ•°è¯´æ˜ï¼š
- `template/test.docx` - Wordæ–‡æ¡£è·¯å¾„
- `20` - åŒ…å«å›¾ç‰‡çš„æ®µè½ç´¢å¼•
- `your_api_key` - ç¡…åŸºæµåŠ¨APIå¯†é’¥

### æ–¹æ³•2: é›†æˆåˆ°å®Œæ•´æ£€æµ‹æµç¨‹

1. **é…ç½®APIå¯†é’¥**

åˆ›å»º `config_api.py` æ–‡ä»¶ï¼ˆä» `config_api.example.py` å¤åˆ¶ï¼‰ï¼š

```python
# config_api.py
SILICONFLOW_API_KEY = "sk-your-actual-api-key"
ENABLE_FIGURE_CONTENT_CHECK = True
```

2. **è¿è¡Œæ£€æµ‹**

```python
from paper_detect.Figure_detect import check_doc_with_template

# å¯ç”¨å†…å®¹æ£€æµ‹
result = check_doc_with_template(
    doc_path='template/test.docx',
    template_identifier='Figure',
    enable_content_check=True,
    api_key='your_api_key'
)
```

### æ–¹æ³•3: åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨

```python
from paper_detect.Figure_content_detect import FigureContentDetector
from docx import Document

# åˆå§‹åŒ–æ£€æµ‹å™¨
api_key = "your_siliconflow_api_key"
detector = FigureContentDetector(api_key)

# åŠ è½½æ–‡æ¡£
doc = Document('paper.docx')

# å‡è®¾ç¬¬20æ®µåŒ…å«å›¾ç‰‡
paragraph = doc.paragraphs[20]

# æ‰§è¡Œæ£€æµ‹
result = detector.detect_figure_content(paragraph, 'paper.docx')

# æŸ¥çœ‹ç»“æœ
if result['is_chart']:
    if result['ok']:
        print("âœ… å›¾è¡¨ç¬¦åˆè§„èŒƒ")
    else:
        print("âŒ å‘ç°é—®é¢˜:")
        for msg in result['messages']:
            print(f"  - {msg}")
else:
    print("â„¹ï¸ éå›¾è¡¨ç±»å‹")
```

## ğŸ“Š APIè¯´æ˜

### ç¡…åŸºæµåŠ¨API

- **æ¨¡å‹**: Qwen3-VL-32B-Instruct
- **APIç«¯ç‚¹**: https://api.siliconflow.cn/v1/chat/completions
- **è·å–APIå¯†é’¥**: https://siliconflow.cn

### APIé…ç½®

```python
class FigureContentDetector:
    def __init__(self, 
                 api_key: str, 
                 api_base: str = "https://api.siliconflow.cn/v1"):
        """
        api_key: APIå¯†é’¥
        api_base: APIåŸºç¡€URLï¼ˆå¯é€‰ï¼‰
        """
```

## ğŸ“ æ£€æµ‹ç»“æœæ ¼å¼

```json
{
  "ok": true/false,
  "is_chart": true/false,
  "messages": [
    "é—®é¢˜æè¿°1",
    "é—®é¢˜æè¿°2"
  ],
  "details": {
    "is_chart": true,
    "issues": [
      {
        "rule": "åˆ»åº¦çº¿æ–¹å‘",
        "severity": "error",
        "description": "åˆ»åº¦çº¿æŒ‡å‘å›¾å¤–éƒ¨ï¼Œåº”æŒ‡å‘å›¾å†…"
      }
    ],
    "summary": "æ€»ä½“è¯„ä»·"
  }
}
```

## ğŸ”§ ä¾èµ–å®‰è£…

```bash
pip install requests pillow python-docx
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥å®‰å…¨**: ä¸è¦å°†APIå¯†é’¥æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
2. **APIè´¹ç”¨**: è§†è§‰æ¨¡å‹APIè°ƒç”¨ä¼šäº§ç”Ÿè´¹ç”¨ï¼Œè¯·æ³¨æ„ä½¿ç”¨é‡
3. **å“åº”æ—¶é—´**: è§†è§‰æ¨¡å‹åˆ†æéœ€è¦æ—¶é—´ï¼ˆé€šå¸¸10-30ç§’ï¼‰
4. **å›¾ç‰‡è´¨é‡**: å›¾ç‰‡è´¨é‡è¶Šé«˜ï¼Œæ£€æµ‹å‡†ç¡®åº¦è¶Šé«˜
5. **ç½‘ç»œè¿æ¥**: éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥è®¿é—®API

## ğŸ“ ç¤ºä¾‹

å‡è®¾æœ‰ä¸€å¼ å›¾è¡¨ï¼Œæ£€æµ‹ç»“æœå¯èƒ½å¦‚ä¸‹ï¼š

```
âœ“ æ£€æµ‹åˆ°å›¾è¡¨

âŒ å‘ç°ä»¥ä¸‹é—®é¢˜ï¼š
  âŒ [ç‰©ç†é‡å•ä½è¡¨ç¤º] çºµåæ ‡"E/(V/m)"ä¸­çš„ç‰©ç†é‡Eæœªä½¿ç”¨æ–œä½“
  âŒ [æ•°å€¼æ ¼å¼] çºµè½´ä½¿ç”¨ä¸€ä½å°æ•°(0.1, 0.2)ï¼Œä½†æ¨ªè½´ä½¿ç”¨æ•´æ•°(1, 2)ï¼Œåº”ç»Ÿä¸€ä¸º(1.0, 2.0)
  âš ï¸  [ç»„åˆå•ä½] å•ä½"V/m"åº”åŠ æ‹¬å·å†™ä¸º"(V/m)"
```

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `paper_detect/Figure_content_detect.py` - å†…å®¹æ£€æµ‹æ ¸å¿ƒæ¨¡å—
- `paper_detect/Figure_detect.py` - å›¾ç‰‡æ ¼å¼æ£€æµ‹ä¸»æ¨¡å—
- `test_figure_content.py` - æµ‹è¯•è„šæœ¬
- `config_api.example.py` - APIé…ç½®ç¤ºä¾‹
- `å›¾ç‰‡å†…å®¹æ£€æµ‹è¯´æ˜.md` - æœ¬æ–‡æ¡£

## ğŸ¤ æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. APIå¯†é’¥æ˜¯å¦æ­£ç¡®
2. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
3. æ–‡æ¡£ä¸­æ˜¯å¦åŒ…å«å›¾ç‰‡
4. å›¾ç‰‡æ˜¯å¦ä¸ºå›¾è¡¨ç±»å‹ï¼ˆéç…§ç‰‡ã€ç¤ºæ„å›¾ï¼‰

