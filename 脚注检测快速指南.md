# 脚注检测功能快速指南

## 概述

增强后的脚注检测系统可以全面验证论文脚注的正确性，包括四个必需字段的格式检查和内容验证。

---

## 检测内容

### 1️⃣ Received Date
- ✅ 格式检查：`Received date: YYYY-MM-DD`

### 2️⃣ Foundation Item
- ✅ 格式检查：`Foundation item: xxx (No. xxx)`

### 3️⃣ Correspondence
- ✅ 拼写检查：Correspondence（不是Corresponding）
- ✅ 格式检查：`* Correspondence should be addressed to NAME, email: xxx`
- ✅ **作者验证**：作者名字必须在论文作者列表中
- ✅ **通讯作者验证**：作者必须标记为通讯作者（*、†、✉等）

### 4️⃣ Citation
- ✅ 作者验证：前三位作者与论文作者一致
- ✅ 作者顺序：与论文中的顺序一致
- ✅ 人名缩写：正确的缩写格式（SURNAME I 或 SURNAME I N）
- ✅ 标题验证：与论文标题一致（自动转换为sentence case）
- ✅ Journal名称：必须包含"Journal of Donghua University (English Edition)"
- ✅ 格式要求：斜体Journal名称

---

## 快速使用

### 检测单个文件

```bash
python paper_detect\Keywords_detect.py check paper.docx templates\Keywords.json
```

### 运行测试

```bash
# 测试所有脚注增强功能
python test_footnote_enhancement.py

# 测试Correspondence作者验证
python test_correspondence_author.py
```

---

## 典型错误示例

### ❌ 错误1：Correspondence拼写错误

**错误写法**：
```
* Corresponding should be addressed to ZHANG Wei, email: zhang@dhu.edu.cn
```

**正确写法**：
```
* Correspondence should be addressed to ZHANG Wei, email: zhang@dhu.edu.cn
```

**检测结果**：
```
❌ Correspondence拼写错误：应为'Correspondence'而不是'Corresponding'
```

---

### ❌ 错误2：Correspondence作者不在论文中

**论文作者**：
```
ZHANG Wei*, LI Ming, WANG Hua
```

**错误脚注**：
```
* Correspondence should be addressed to ZHAO Yu, email: zhao@test.com
```

**检测结果**：
```
❌ Correspondence作者'ZHAO Yu'不在论文作者列表中
   论文作者列表: ZHANG Wei, LI Ming, WANG Hua
```

---

### ⚠️ 警告：Correspondence作者未标记为通讯作者

**论文作者**：
```
ZHANG Wei*, LI Ming, WANG Hua
```

**警告脚注**：
```
* Correspondence should be addressed to LI Ming, email: li@dhu.edu.cn
```

**检测结果**：
```
⚠️ Correspondence作者'LI Ming'在作者列表中但未标记为通讯作者（缺少*或†标记）
```

**修正方法**：在论文中将`LI Ming`改为`LI Ming*`

---

### ❌ 错误3：Citation作者与论文不匹配

**论文作者**：
```
ZHANG Wei*, LI Ming, WANG Hua
```

**错误Citation**：
```
ZHANG W, WANG H, LI M, et al. Title [J]. Journal...
```

**检测结果**：
```
❌ Citation中第2位作者'WANG H'与论文作者'LI MING'不匹配
```

**正确写法**：
```
ZHANG W, LI M, WANG H, et al. Title [J]. Journal...
```

---

### ❌ 错误4：Citation标题大小写错误

**论文标题**：
```
Study on the Effect of Temperature on Polymer Synthesis
```

**错误Citation**（使用了Title Case）：
```
ZHANG W, LI M, WANG H, et al. Study on the Effect of Temperature on Polymer Synthesis [J]. Journal...
```

**检测结果**：
```
❌ Citation中的标题与论文标题不一致
   论文标题: Study on the Effect of Temperature on Polymer Synthesis
   期望格式(sentence case): Study on the effect of temperature on polymer synthesis
   实际Citation: Study on the Effect of Temperature on Polymer Synthesis
```

**正确写法**（使用Sentence Case）：
```
ZHANG W, LI M, WANG H, et al. Study on the effect of temperature on polymer synthesis [J]. Journal...
```

---

## 检查清单

在提交论文前，请确认：

### Correspondence字段
- [ ] 拼写正确（Correspondence）
- [ ] 作者名字正确
- [ ] 作者在论文作者列表中
- [ ] 作者标记了通讯作者符号（*、†、✉等）

### Citation字段
- [ ] 包含前三位作者
- [ ] 作者顺序与论文一致
- [ ] 作者姓名缩写正确（SURNAME I 或 SURNAME I N）
- [ ] 后面跟"et al."
- [ ] 标题与论文标题内容一致
- [ ] 标题使用sentence case（仅首字母大写）
- [ ] 包含"Journal of Donghua University (English Edition)"
- [ ] Journal名称为斜体

---

## 常见问题

### Q1: 如何标记通讯作者？

**A**: 在作者名字后添加符号：
```
ZHANG Wei*     ✓ 星号
ZHANG Wei†     ✓ 剑号
ZHANG Wei✉     ✓ 信封
```

### Q2: Correspondence可以指向第二作者吗？

**A**: 可以，但该作者必须标记为通讯作者：
```
ZHANG Wei, LI Ming*, WANG Hua
```
此时Correspondence可以写：
```
* Correspondence should be addressed to LI Ming, email: li@test.com
```

### Q3: Citation标题为什么要用sentence case？

**A**: 学术规范要求：
- 论文标题：Title Case（每个实词首字母大写）
- 引用标题：Sentence case（仅首字母大写）

示例：
```
论文: Study on the Effect of Temperature
引用: Study on the effect of temperature
```

### Q4: 特殊词汇（如化学式）怎么办？

**A**: 系统会自动保留特殊大小写：
```
论文标题: Application of FePc in Solar Cells
Citation标题: Application of FePc in solar cells  （FePc保留大小写）
```

### Q5: 如果有多个通讯作者怎么办？

**A**: 标记所有通讯作者，Correspondence指向其中一个：
```
论文作者: ZHANG Wei*, LI Ming†, WANG Hua
Correspondence: ZHANG Wei 或 LI Ming 都可以
```

---

## 验证规则总结

### Correspondence作者验证

| 情况 | 检测结果 | 说明 |
|------|---------|------|
| 作者在列表中且标记为通讯作者 | ✅ 通过 | 正确配置 |
| 作者在列表中但未标记 | ⚠️ 警告 | 需要添加通讯作者标记 |
| 作者不在列表中 | ❌ 错误 | 名字错误或拼写有误 |

### Citation作者验证

| 检查项 | 要求 |
|--------|------|
| 作者数量 | 必须是前3位作者 |
| 作者顺序 | 必须与论文一致 |
| 姓名格式 | SURNAME I 或 SURNAME I N |
| 后续标记 | 必须有"et al." |

### Citation标题验证

| 检查项 | 要求 |
|--------|------|
| 内容一致性 | 与论文标题内容相同 |
| 大小写格式 | 使用sentence case |
| 特殊词汇 | 保留原有大小写（如FePc, SQL） |

---

## 获取帮助

- 详细功能说明：`CORRESPONDENCE_AUTHOR_VALIDATION.md`
- 完整更新总结：`脚注检测功能更新总结.md`
- 测试脚本：`test_correspondence_author.py`

---

## 版本信息

- **当前版本**: 2.1
- **更新日期**: 2025-10-24
- **主要功能**: Correspondence作者验证、Citation作者/标题比对
